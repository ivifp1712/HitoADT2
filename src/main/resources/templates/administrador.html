<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<div th:insert="fragmento.html"> </div>
<ul class="navbar-nav">
  <li class="nav-item" th:switch="${user}">
    <div th:case="'No se ha iniciado sesiÃ³n'"> <a class="btn btn-success" role="button" th:href="@{/login}">Log In</a>  </div>
    <div th:case="*"th:href="@{/login}"> <a class="btn btn-danger" role="button" th:href="@{/logout}">Log Out</a></div>
  </li>
</ul>
</div>
</nav>
<h1>Portal del administrador</h1>
<form th:action="@{/admin/usuario/editar}" method="get">
<th:block th:each="usuario : ${listaUsuarios}">
  <p>
    <input type="submit" th:value="${usuario.getNif()}" name="nif">

  <span th:text="${usuario.getNombre()}"></span>
    <span th:text="${usuario.getApellidos()}"></span>
    <span th:text="${usuario.getNif()}"></span>
<!--  crear nueva tarea, se pasa como parametro NIF-->
    <a th:href="@{/admin/tareas/nueva(nif=${usuario.getNif()})}">Crear nueva tarea</a>
    <ul>
    <th:block th:each="tarea : ${usuario.getTareas()}">
      <li>
        <span th:text="${tarea.getNombre()}"></span>
        <span> - </span>
        <span th:text="${tarea.getDescripcion()}"></span>
        <span> - </span>
        <style>
            .estado {
                display: inline-block;
            }
        </style>
        <span th:switch="${tarea.getEstado()}">
          <p th:case="'1'" class="estado">ğŸŸ¢</p>
          <p th:case="'0'" class="estado">ğŸ”´</p>
          <p th:case="*" class="estado">No definido</p>
        </span>
        <span> - </span>
        <a th:href="@{/admin/tareas/editar(nif=${usuario.getNif()}, id=${tarea.getId()})}">Editar</a>
        <span> - </span>
        <a th:href="@{/admin/tareas/eliminar(nif=${usuario.getNif()}, id=${tarea.getId()})}">Eliminar</a>
      </li>
    </th:block>
    </ul>
  </p>
</th:block>
</form>
<p>
  <a th:href="@{/admin/usuario/nuevo}">Registrar un nuevo usuario</a>
</p>
</body>
</html>